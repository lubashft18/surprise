<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Our Love Gallery ‚ù§Ô∏è</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --rose: #ff2e63;
      --soft-pink: #ffd8e0;
      --bg1: #ffd1dc;
      --bg2: #ffdff2;
      --card-bg: rgba(255,255,255,0.95);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;padding:0}
    body{
      font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background: linear-gradient(135deg, var(--bg1), #ffeef2 60%, var(--bg2));
      color:#3a0b0b;
      overflow-x:hidden;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Soft vignette and paper texture feel */
    body::before{
      content:"";
      position:fixed; inset:0;
      pointer-events:none;
      background: radial-gradient(60% 50% at 50% 20%, rgba(255,255,255,0.25), transparent 25%),
                  radial-gradient(40% 30% at 10% 80%, rgba(255,230,240,0.12), transparent 10%);
      mix-blend-mode: soft-light;
      z-index:0;
    }

    /* Animation layer: all decorative floating elements live here (won't affect layout) */
    .animation-layer{
      position: fixed; inset:0;
      pointer-events:none;
      overflow:hidden;
      z-index:1;
      transform: translateZ(0);
    }
    .animation-layer .f-heart, .animation-layer .petal, .animation-layer .spark {
      position:absolute;
      will-change: transform, opacity;
      pointer-events:none;
      transform: translate3d(0,0,0);
      user-select:none;
    }

    /* floating heart animation (upwards) */
    @keyframes heartRise {
      0%   { transform: translateY(0) scale(1); opacity:1; }
      80%  { opacity: 0.9; }
      100% { transform: translateY(-130vh) scale(0.45) rotate(40deg); opacity:0; }
    }
    .f-heart { font-size:18px; filter: drop-shadow(0 6px 10px rgba(0,0,0,0.12)); }

    /* petal falling */
    @keyframes petalFall {
      0%   { transform: translateY(-8vh) rotate(0deg); opacity:1; }
      100% { transform: translateY(120vh) rotate(380deg); opacity:0; }
    }
    .petal { width: 26px; height: 26px; background: url('https://i.ibb.co/0F1TfD9/petal.png') no-repeat center/contain; }

    /* click sparkle */
    @keyframes sparkPop {
      0%   { transform: translateY(0) scale(1); opacity:1; }
      100% { transform: translateY(-28px) scale(1.6); opacity:0; }
    }
    .spark { font-size:22px; }

    /* Page container */
    .page {
      position: relative;
      z-index: 5;
      padding: 26px 18px 80px;
      max-width: 1200px;
      margin: 0 auto;
    }

    /* Heading */
    h1 {
      font-family: "Dancing Script", serif;
      font-size: 2.6rem;
      margin: 8px 0 8px;
      color: var(--rose);
      text-shadow: 0 6px 18px rgba(255,110,140,0.18);
      display:flex;
      justify-content:center;
      align-items:center;
      gap:12px;
    }
    .subtitle {
      text-align:center;
      color:#7a2432;
      margin-top:-6px;
      margin-bottom:18px;
      font-weight:500;
    }

    /* top controls: music toggle & open modal */
    .top-controls {
      display:flex;
      gap:10px;
      justify-content:center;
      margin-bottom:18px;
      align-items:center;
    }
    .control-btn {
      background: linear-gradient(180deg,var(--rose),#ff6fa5);
      border:none;
      color:white;
      padding:10px 16px;
      border-radius:999px;
      cursor:pointer;
      box-shadow: 0 6px 18px rgba(255,46,99,0.22);
      font-weight:600;
      transition: transform .12s ease, box-shadow .12s;
      font-size:0.95rem;
      display:inline-flex;
      gap:8px;
      align-items:center;
      z-index:30;
    }
    .control-btn:active { transform: translateY(1px) scale(.995); }
    .secondary-btn {
      background: transparent;
      border: 2px dashed rgba(255,46,99,0.18);
      color: #9b2b4a;
      padding:8px 12px;
      border-radius: 999px;
      font-weight:600;
    }

    /* Video highlight */
    .video-container{
      max-width:900px;
      margin: 10px auto 24px;
      border-radius: 18px;
      overflow:hidden;
      box-shadow: 0 18px 60px rgba(0,0,0,0.12);
      position:relative;
      border: 1px solid rgba(255,46,99,0.06);
    }
    .video-container video{
      width:100%;
      display:block;
      height:auto;
      filter: saturate(115%) brightness(.86) contrast(1.03);
      object-fit:cover;
    }
    .video-overlay{
      position:absolute; inset:0; display:flex;
      align-items:center; justify-content:center;
      color:white; text-shadow: 0 6px 22px rgba(0,0,0,.35);
      font-family:"Dancing Script", serif;
      font-size:1.1rem;
      pointer-events:none;
    }

    /* Gallery grid */
    .gallery-grid {
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap:18px;
      align-items:stretch;
      margin: 22px 12px 16px;
    }

    .gallery-item{
      position:relative;
      border-radius:14px;
      overflow:hidden;
      background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,240,245,0.9));
      box-shadow: 0 10px 30px rgba(54,10,20,0.08);
      transition: transform .24s ease, box-shadow .24s;
      cursor: pointer;
      min-height:180px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .gallery-item:hover { transform: translateY(-6px); box-shadow: 0 20px 60px rgba(54,10,20,0.14); }
    .gallery-item img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      transition: transform .45s cubic-bezier(.2,.9,.25,1);
      will-change: transform;
    }
    .gallery-item:hover img{ transform: scale(1.06); }

    .hover-message{
      position:absolute;
      left:0; right:0; bottom:0;
      padding:12px;
      font-family: "Dancing Script", serif;
      font-size:1rem;
      color:white;
      background: linear-gradient(180deg, rgba(255,46,99,0.0), rgba(255,46,99,0.9));
      text-align:center;
      transform: translateY(100%);
      transition: transform .28s ease, opacity .28s;
      opacity:0;
    }
    .gallery-item:hover .hover-message{ transform: translateY(0); opacity:1; }

    /* Framed romantic modal for image viewer */
    .image-modal{
      position:fixed; inset:0;
      display:none; align-items:center; justify-content:center;
      background: linear-gradient(180deg, rgba(12,8,12,0.45), rgba(12,8,12,0.6));
      z-index:60;
      padding:20px;
    }
    .image-modal .frame{
      width:min(900px,94%);
      max-height:92vh;
      background: var(--card-bg);
      border-radius:20px;
      padding:18px;
      box-shadow: 0 30px 80px rgba(10,6,6,0.4);
      text-align:center;
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .frame img{
      width:100%;
      height:auto;
      border-radius:12px;
      max-height:68vh;
      object-fit:cover;
    }
    .frame .caption{
      font-family:"Dancing Script", serif;
      font-size:1.15rem;
      color:var(--rose);
      text-shadow: 0 6px 12px rgba(255,110,140,0.12);
    }
    .modal-actions{ display:flex; gap:12px; justify-content:center; flex-wrap:wrap; }
    .modal-actions .control-btn{ padding:10px 14px; font-size:.98rem; }

    /* Surprise modal (small) */
    .surprise-modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:70; background: rgba(0,0,0,0.45); }
    .surprise-card{
      background: var(--card-bg);
      border-radius:18px;
      padding:18px;
      width:360px;
      box-shadow: 0 30px 80px rgba(10,6,6,0.3);
      text-align:center;
    }
    .gif-box img{ width:120px; border-radius:12px; display:block; margin:0 auto 10px; }

    /* small screens */
    @media (max-width:520px){
      h1{font-size:2.1rem}
      .video-overlay{font-size:1rem}
      .control-btn{ padding:8px 12px; font-size:.92rem}
      .surprise-card{ width:92%; padding:14px }
    }
  </style>
</head>
<body>

  <!-- Fixed animation layer: hearts/petals/sparks -->
  <div class="animation-layer" id="animLayer" aria-hidden="true"></div>

  <div class="page" role="main">
    <h1>üíñ Our Love Gallery üíñ</h1>
    <div class="subtitle">A little corner of memories ‚Äî curated with love ‚ú®</div>

    <div class="top-controls" aria-hidden="false">
      <button class="control-btn" id="musicToggle" aria-pressed="false" title="Play / Pause music">üéµ Play music</button>
      <button class="control-btn secondary-btn" id="openSurprise">üéÅ More Surprises</button>
    </div>

    <!-- Video highlight -->
    <div class="video-container" aria-hidden="false">
      <video autoplay muted loop playsinline>
        <source src="video/Untitled video - Made with Clipchamp (11).mp4" type="video/mp4">
        <!-- fallback text -->
      </video>
      <div class="video-overlay">‚ú® Every love story is beautiful ‚Äî ours is my favorite ‚ú®</div>
    </div>

    <!-- Gallery -->
    <div class="gallery-grid" id="galleryGrid">
      <!-- Keep your original items/paths ‚Äî I'm using the same structure you provided -->
      <div class="gallery-item" data-caption="Every moment with you is magic üíñ">
       <img src="images/06bf42f6-af88-427e-bfb9-2b60d740a643.jpg" alt="Memory 1">
        <div class="hover-message">Every moment with you is magic üíñ</div>
      </div>

      <div class="gallery-item" data-caption="You are my favorite memory üåπ">
        <img src="images/c17a38d0-95c7-49a6-afde-24aa90907568.jpg" alt="Memory 2">
        <div class="hover-message">You are my favorite memory üåπ</div>
      </div>

      <div class="gallery-item" data-caption="Forever is with you ‚ù§Ô∏è">
        <img src="images/df741071-4e99-40ee-b1ef-ee1afb37cd6a.jpg" alt="Memory 3">
        <div class="hover-message">Forever is with you ‚ù§Ô∏è</div>
      </div>

      <div class="gallery-item" data-caption="Our love story is my favorite üìñüíï">
        <img src="images/fac5ddc1-9a13-4ad2-b20f-929956bceac6.jpg" alt="Memory 4">
        <div class="hover-message">Our love story is my favorite üìñüíï</div>
      </div>
    </div>

  </div>

  <!-- Image modal (viewer) -->
  <div class="image-modal" id="imageModal" aria-hidden="true" role="dialog" aria-label="Image viewer">
    <div class="frame" role="document">
      <img id="modalImage" src="" alt="">
      <div class="caption" id="modalCaption"></div>
      <div class="modal-actions">
        <button class="control-btn" id="prevBtn">‚óÄ Prev</button>
        <button class="control-btn" id="likeBtn">ü§ç Like</button>
        <button class="control-btn" id="nextBtn">Next ‚ñ∂</button>
        <button class="control-btn secondary-btn" id="closeImage">Close ‚úï</button>
      </div>
    </div>
  </div>

<!-- Surprise modal -->
<div class="surprise-modal" id="surpriseModal" aria-hidden="true" role="dialog" aria-label="Surprise dialog">
  <div class="surprise-card">
    <div class="gif-box" id="gifBox">
    
    </div>
    <p id="surpriseQuestion" style="font-family:'Dancing Script', serif; font-size:1.15rem; color:var(--rose)">Do you love me? üéÅ</p>
    <div style="margin-top:10px">
      <button class="control-btn" id="yesBtn">Yes üíï</button>
      <button class="control-btn secondary-btn" id="noBtn">No üò¢</button>
    </div>
    <div id="surpriseStep" style="margin-top:12px"></div>
    <div style="margin-top:12px">
      <button class="control-btn secondary-btn" id="closeSurprise">Close</button>
    </div>
  </div>
</div>


  <!-- Audio files -->
  <audio id="bgMusic" src="song/TJ Monterde KZ Tandingan Palagi Lyrics.mp3" preload="auto"></audio>
  <audio id="loveSound" src="song/i-love-you-cartoon-voice-136531.mp3" preload="auto"></audio>

  <script>
    /* ------------------ Animation layer (safe, non-blocking) ------------------ */
    const animLayer = document.getElementById('animLayer');

    // Random helpers
    const rand = (a,b) => Math.random() * (b-a) + a;
    const clamp = (v,a,b) => Math.max(a, Math.min(b, v));

    // Create small floating hearts that rise (composited transforms only)
    function createFloatingHeart(){
      const el = document.createElement('div');
      el.className = 'f-heart';
      el.innerText = '‚ù§';
      const left = rand(4,94);
      el.style.left = left + 'vw';
      el.style.top = '100vh'; 
      el.style.color = 'red'           // start off-screen bottom
      const size = Math.round(rand(14,36));
      el.style.fontSize = size + 'px';
      const duration = rand(4.6,8.2);
      el.style.animation = `heartRise ${duration}s linear forwards`;
      animLayer.appendChild(el);
      el.addEventListener('animationend', () => el.remove(), { once:true });
    }

    // Petals that fall
    function createPetal(){
      const el = document.createElement('div');
      el.className = 'petal';
      el.style.left = rand(2,96) + 'vw';
      el.style.top = '-10vh';
      const scale = rand(.8,1.6);
      el.style.width = Math.round(26 * scale) + 'px';
      el.style.height = Math.round(26 * scale) + 'px';
      const dur = rand(6.2,10.2);
      el.style.animation = `petalFall ${dur}s linear forwards`;
      animLayer.appendChild(el);
      el.addEventListener('animationend', ()=> el.remove(), { once:true });
    }

    // Click spark
    function createSpark(x,y){
      const el = document.createElement('div');
      el.className = 'spark';
      el.innerText = 'üíñ';
      // position in px (clamped inside viewport)
      el.style.left = clamp(x, 8, window.innerWidth - 8) + 'px';
      el.style.top  = clamp(y, 8, window.innerHeight - 8) + 'px';
      el.style.animation = `sparkPop 700ms ease forwards`;
      animLayer.appendChild(el);
      el.addEventListener('animationend', ()=> el.remove(), { once:true });
    }

    // intervals (tweak to taste)
    const heartInterval = setInterval(createFloatingHeart, 700);
    const petalInterval = setInterval(createPetal, 1200);

    // pause intervals when tab hidden to save CPU
    document.addEventListener('visibilitychange', () => {
      if(document.hidden){
        clearInterval(heartInterval);
        clearInterval(petalInterval);
      }
    });

    // create spark on clicks, but avoid creating when clicking certain controls (buttons inside page)
    document.addEventListener('click', (ev) => {
      // if clicked on a control (button, link) we still allow a small spark ‚Äî it's fine.
      // If you want to avoid sparks on specific selectors, add checks here.
      const x = ev.clientX || (ev.pageX - window.pageXOffset);
      const y = ev.clientY || (ev.pageY - window.pageYOffset);
      createSpark(x,y);
      // start music on first user interaction if it's paused (polite autoplay)
      if(bgMusic.paused && !musicStartedByUser){
        tryPlayMusic();
      }
    });

    /* ------------------ Music controls ------------------ */
    const bgMusic = document.getElementById('bgMusic');
    const musicToggle = document.getElementById('musicToggle');
    let musicStartedByUser = false;

    function tryPlayMusic(){
      bgMusic.play().then(()=> {
        musicStartedByUser = true;
        musicToggle.innerText = '‚è∏Ô∏è Pause music';
        musicToggle.setAttribute('aria-pressed','true');
      }).catch(()=> {
        // autoplay blocked ‚Äî leave play control to user
      });
    }

    musicToggle.addEventListener('click', () => {
      if(bgMusic.paused){
        bgMusic.play().catch(()=>{});
        musicToggle.innerText = '‚è∏Ô∏è Pause music';
        musicToggle.setAttribute('aria-pressed','true');
        musicStartedByUser = true;
      } else {
        bgMusic.pause();
        musicToggle.innerText = 'üéµ Play music';
        musicToggle.setAttribute('aria-pressed','false');
      }
    });

    /* ------------------ Image viewer modal ------------------ */
    const galleryGrid = Array.from(document.querySelectorAll('.gallery-item'));
    const imageModal = document.getElementById('imageModal');
    const modalImage = document.getElementById('modalImage');
    const modalCaption = document.getElementById('modalCaption');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const closeImage = document.getElementById('closeImage');
    const likeBtn = document.getElementById('likeBtn');

    let currentIndex = -1;

    function openImage(index){
      if(index < 0 || index >= galleryGrid.length) return;
      const item = galleryGrid[index];
      const img = item.querySelector('img');
      const caption = item.dataset.caption || img.alt || '';
      modalImage.src = img.src;
      modalImage.alt = img.alt || '';
      modalCaption.innerText = caption;
      imageModal.style.display = 'flex';
      imageModal.setAttribute('aria-hidden','false');
      currentIndex = index;
      likeBtn.innerText = 'ü§ç Like';
      // focus for keyboard navigation
      nextBtn.focus();
    }

    function closeImageModal(){
      imageModal.style.display = 'none';
      imageModal.setAttribute('aria-hidden','true');
      modalImage.src = '';
      currentIndex = -1;
    }

    galleryGrid.forEach((item, idx) => {
      item.addEventListener('click', () => openImage(idx));
    });

    prevBtn.addEventListener('click', () => {
      if(currentIndex <= 0) openImage(galleryGrid.length - 1);
      else openImage(currentIndex - 1);
    });
    nextBtn.addEventListener('click', () => {
      if(currentIndex >= galleryGrid.length - 1) openImage(0);
      else openImage(currentIndex + 1);
    });
    closeImage.addEventListener('click', closeImageModal);

    // close by clicking backdrop
    imageModal.addEventListener('click', (ev) => {
      if(ev.target === imageModal) closeImageModal();
    });
    // keyboard navigation
    document.addEventListener('keydown', (ev) => {
      if(imageModal.style.display === 'flex'){
        if(ev.key === 'Escape') closeImageModal();
        if(ev.key === 'ArrowRight') nextBtn.click();
        if(ev.key === 'ArrowLeft') prevBtn.click();
      }
    });

    // like button toggle
    likeBtn.addEventListener('click', () => {
      if(likeBtn.innerText.includes('ü§ç')) likeBtn.innerText = 'üíñ Liked';
      else likeBtn.innerText = 'ü§ç Like';
    });

    /* ------------------ Surprise modal (romantic flow) ------------------ */
const openSurprise = document.getElementById('openSurprise');
const surpriseModal = document.getElementById('surpriseModal');
const closeSurprise = document.getElementById('closeSurprise');
const yesBtn = document.getElementById('yesBtn');
const noBtn = document.getElementById('noBtn');
const surpriseStep = document.getElementById('surpriseStep');
const gifBox = document.getElementById('gifBox');

openSurprise.addEventListener('click', () => {
  surpriseModal.style.display = 'flex';
  surpriseModal.setAttribute('aria-hidden','false');
  // reset state
 
  document.getElementById('surpriseQuestion').innerText = "Do you love me? üéÅ";
  surpriseStep.innerHTML = '';
});

closeSurprise.addEventListener('click', () => {
  surpriseModal.style.display = 'none';
  surpriseModal.setAttribute('aria-hidden','true');
});

/* YES FLOW */
yesBtn.addEventListener('click', () => {
  gifBox.innerHTML = `<img src="https://media.tenor.com/hjHT92fTnAAAAAAC/milk-and-mocha-bear-hug.gif" alt="Happy">`;
  surpriseStep.innerHTML = `
    <div style="margin-top:10px">
      <button class="control-btn" id="loveYouBtn">I love you too üòò‚ù§Ô∏è</button>
    </div>
  `;

  // second step
  document.getElementById('loveYouBtn').addEventListener('click', () => {
    surpriseStep.innerHTML = `
      <p style="color:#b42b3a; margin:10px 0; font-family:'Dancing Script',serif;">
        Because you love me, I have a surprise for you üíù
      </p>
      <div>
        <button class="control-btn" onclick="window.location.href='surprise.html'">Open Surprise üéÅ</button>
      </div>
    `;
  });
});

/* NO FLOW */
noBtn.addEventListener('click', () => {
  gifBox.innerHTML = `<img src="https://media.tenor.com/5t-iIxnzE8MAAAAC/sad-bear-cry.gif" alt="Sad">`;
  surpriseStep.innerHTML = `
    <div style="margin-top:10px">
      <button class="control-btn" id="ouchBtn">Ouchhh üò≠</button>
    </div>
  `;

  // second step
  document.getElementById('ouchBtn').addEventListener('click', () => {
    surpriseStep.innerHTML = `
      <p style="color:#b42b3a; margin:10px 0; font-family:'Dancing Script',serif;">
        I hate you, you hurt me üíîüò≠
      </p>
      <div>
        <button class="control-btn secondary-btn" id="leaveBtn">Leave üö™</button>
      </div>
    `;
    document.getElementById('leaveBtn').addEventListener('click', () => {
      surpriseModal.style.display = 'none';
      surpriseModal.setAttribute('aria-hidden','true');
    });
  });
});

/* click outside closes modal */
surpriseModal.addEventListener('click', (ev) => {
  if(ev.target === surpriseModal) {
    surpriseModal.style.display = 'none';
    surpriseModal.setAttribute('aria-hidden','true');
  }
});


    /* ------------------ small interactive sounds on image click ------------------ */
    const loveSound = document.getElementById('loveSound');
    document.querySelectorAll('.gallery-item img').forEach(img => {
      img.addEventListener('click', () => {
        loveSound.currentTime = 0;
        loveSound.play().catch(()=>{});
      });
    });

    /* ------------------ polite autoplay (play after user interaction) ------------------ */
    // If user interacts anywhere, start music once
    document.addEventListener('pointerdown', function onceStart(){
      if(!musicStartedByUser){
        tryPlayMusic();
      }
      document.removeEventListener('pointerdown', onceStart);
    }, { once: true });

  </script>
</body>
</html>

